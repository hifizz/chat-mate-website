{
  "enabled": true,
  "name": "Utils测试同步",
  "description": "当utils目录下的文件发生变动时，自动创建或更新对应的单元测试文件，确保测试文件与源码文件保持1:1对应关系",
  "version": "1",
  "when": {
    "type": "fileEdited",
    "patterns": [
      "/Users/zilin/side/kiro-dev/utils/**/*.ts",
      "/Users/zilin/side/kiro-dev/utils/**/*.js"
    ]
  },
  "then": {
    "type": "askAgent",
    "prompt": "检测到utils目录下的文件变动。请分析变动的文件，并执行以下操作：\n\n1. 如果是新增文件，在utils/__tests__目录下创建对应的测试文件（文件名格式：原文件名.test.ts）\n2. 如果是修改现有文件，检查并更新对应的测试文件，确保测试覆盖新增或修改的功能\n3. 如果是删除文件，提醒用户删除对应的测试文件\n4. 确保测试文件结构清晰，包含：\n   - 导入被测试的模块\n   - 描述性的测试套件名称\n   - 针对每个导出函数/类的测试用例\n   - 边界条件和错误情况的测试\n\n请使用Jest作为测试框架，遵循项目现有的测试模式和命名约定。确保测试文件与源码文件保持1:1的对应关系，维护清晰的项目架构。"
  }
}